// Debugging AR Business Card Script
document.addEventListener('DOMContentLoaded', () => {
  const startArButton = document.getElementById("start-ar-button");
  const landingPage = document.getElementById("landing-page");
  const arContainer = document.getElementById("ar-container");

  if (!startArButton || !landingPage || !arContainer) {
    console.error('Critical elements not found. Check your HTML.');
    return;
  }

  const initAR = () => {
    console.log('Initializing AR...');

    // Check for WebXR support
    if (!('xr' in navigator)) {
      alert('WebXR is not supported in this browser.');
      return;
    }

    // Hide landing page, show AR container
    landingPage.style.display = "none";
    arContainer.style.display = "block";

    // Set up Scene, Camera, Renderer
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.xr.enabled = true;
    arContainer.appendChild(renderer.domElement);

    // Lighting
    const light = new THREE.HemisphereLight(0xffffff, 0xbbbbff, 1);
    scene.add(light);

    // Business Card (Basic Placeholder)
    const planeGeometry = new THREE.PlaneGeometry(1, 0.5);
    const planeMaterial = new THREE.MeshBasicMaterial({ color: 0x333366, side: THREE.DoubleSide });
    const card = new THREE.Mesh(planeGeometry, planeMaterial);
    card.position.set(0, 0, -1.5);
    scene.add(card);

    // Animate
    renderer.setAnimationLoop(() => {
      renderer.render(scene, camera);
    });

    console.log('AR Initialized Successfully');
  };

  // Add Event Listener for the Start Button
  startArButton.addEventListener('click', (event) => {
    console.log('Start AR Button Clicked');
    initAR();
  });

  // Additional Debugging
  console.log('AR Script Loaded Successfully');
});
